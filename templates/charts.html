{% extends 'base.html' %}

{% block title %} {% endblock %}


{% block content %}

<br>
<!DOCTYPE html>
<html>
<body>
<form id="chart-form">
  <select name="comp" id="comp-field" >
    <option value="PYPl">Paypal</option>
    <option value="NVDA">Nvidia</option>
    <option value="CRM">Salesforce</option>
    <option value="TWLO">Twilio</option>
    <option value="AAPL">Apple</option>
    <option value="MSFT">Microsoft</option>
  </select>
  <input type="submit" value="Submit" id="ticker-submit">

</form>


  <div class="Company">
    <canvas id="lineChart"></canvas>
    <div id="lineLegend" class="chart-legend"></div>
  </div>

  <div class="Company">
    <canvas id="BarChart"></canvas>
    <div id="BarLegend" class="chart-legend"></div>
    
  </div>

  <script>
    const options = {
      responsive: true
    };

    // Make Line Chart of daily stock prices
    let ctx_line = $("#lineChart").get(0).getContext("2d");

    $.get("/chart.json", (data) => {
      let compChart = Chart.Line(ctx_line, {
                                    data: data,
                                    options: options
                                });

      $("#lineLegend").html(compChart.generateLegend());
    });

    $('#chart-form').on('submit', (evt) => {
      evt.preventDefault();

      const formInputs = $('#chart-form').serialize();

      $.get("/chart.json", formInputs, (data) => {
      let compChart = Chart.Line(ctx_line, {
                                    data: data,
                                    options: options
                                });
      $("#lineLegend").html(compChart.generateLegend());
    });
    });





    // Make chart to show daily price variation 
    // let ctx_line = $("#BarChart").get(0).getContext("2d");

    // $.get("/variation.json", (data) => {
    //   let myBarChart = Chart.Line(ctx_line, {
    //                                 data: data,
    //                                 options: options
    //                             });

    //   $("#BarLegend").html(myBarChart.generateLegend());
    // });

    // $('#chart-form').on('submit', (evt) => {
    //   evt.preventDefault();

    //   const formInputs = $('#chart-form').serialize();

    //   $.get("/variation.json", formInputs, (data) => {
    //   let myBarChart = Chart.Line(ctx_line, {
    //                                 data: data,
    //                                 options: options
    //                             });
    //   $("#BarLegend").html(myBarChart.generateLegend());
    // });
    // });












  </script>
</body>
</html>

{% endblock %}
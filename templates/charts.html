{% extends 'base.html' %}

{% block title %} {% endblock %}


{% block content %}

<br>
<!DOCTYPE html>
<html>
<body>
<form id="chart-form">
  <select name="comp" id="comp-field" >
    <option value="PYPl">Paypal</option>
    <option value="NVDA">Nvidia</option>
    <option value="CRM">Salesforce</option>
    <option value="TWLO">Twilio</option>
    <option value="AAPL">Apple</option>
    <option value="MSFT">Microsoft</option>
  </select>
  <input type="submit" value="Submit" id="ticker-submit">

</form>


  <div class="Company">
    <canvas id="lineChart"></canvas>
    <div id="lineLegend" class="chart-legend"></div>
  </div>

  <script>
    const options = {
      responsive: true
    };

    let ctx_line = $("#lineChart").get(0).getContext("2d");

    $.get("/chart.json", (data) => {
      let compChart = Chart.Line(ctx_line, {
                                    data: data,
                                    options: options
                                });
      $("#lineLegend").html(compChart.generateLegend());
    });

    $('#chart-form').on('submit', (evt) => {
      evt.preventDefault();

      const formInputs = $('#chart-form').serialize();
      $.get("/chart.json", formInputs, (data) => {
      let compChart = Chart.Line(ctx_line, {
                                    data: data,
                                    options: options
                                });
      $("#lineLegend").html(compChart.generateLegend());
    });
    });

  </script>
</body>
</html>

{% endblock %}